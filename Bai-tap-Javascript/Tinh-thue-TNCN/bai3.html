<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i 3 - T√≠nh ti·ªÅn thu·∫ø</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="./bai3.css">
    <link rel="stylesheet" href="./bai3.js">
</head>

<body class="bg-blue-50 flex items-center justify-center min-h-screen">
    <div class="max-w-lg mx-auto p-6">
        <h2 class="text-xl font-bold text-green-700 flex items-center mb-4">
            üí∞ T√≠nh thu·∫ø thu nh·∫≠p c√° nh√¢n
        </h2>

        <!-- Form nh·∫≠p li·ªáu (CƒÉn tr√™n c√πng 1 h√†ng) -->
        <div class="flex space-x-4">
            <input type="text" id="name" placeholder="Nh·∫≠p h·ªç t√™n"
                class="w-full min-w-[200px] p-3 rounded-xl bg-gray-100 border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:outline-none">
            <input type="number" id="income" placeholder="T·ªïng thu nh·∫≠p nƒÉm"
                class="w-full min-w-[200px] p-3 rounded-xl bg-gray-100 border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:outline-none">
            <input type="number" id="dependents" placeholder="S·ªë ng∆∞·ªùi ph·ª• thu·ªôc"
                class="w-full min-w-[200px] p-3 rounded-xl bg-gray-100 border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:outline-none">
        </div>

        <!-- Button (CƒÉn b√™n tr√°i d∆∞·ªõi input) -->
        <div class="flex justify-start mt-4">
            <button class="px-6 py-2 bg-blue-500 text-white font-semibold rounded-full shadow-md hover:bg-blue-600 transition" onclick="ketQua()">
                T√≠nh ti·ªÅn thu·∫ø
            </button>
        </div>

        <p id="result" class="mt-4 font-bold text-red-600"></p>

        <script>
            function ketQua() {
                let thuNhapNam = parseFloat(document.getElementById("income").value) || 0;
                let soNguoiPhuThuoc = parseInt(document.getElementById("dependents").value) || 0;

                let giamTruBanThan = 132e+6;  // 132 tri·ªáu/nƒÉm
                let giamTruNguoiPhuThuoc = 52.8e+6 * soNguoiPhuThuoc;  // 52.8 tri·ªáu/ng∆∞·ªùi/nƒÉm

                let thuNhapChiuThue = thuNhapNam - giamTruBanThan - giamTruNguoiPhuThuoc;
                if (thuNhapChiuThue <= 0) {
                    document.getElementById("result").innerText = "Kh√¥ng ph·∫£i n·ªôp thu·∫ø!";
                    return;
                }

                // B·∫≠c thu·∫ø 
                let bacThue = [60e+6, 120e+6, 216e+6, 384e+6, 624e+6, 960e+6]; 
                let thueSuat = [0.05, 0.1, 0.15, 0.2, 0.25, 0.3, 0.35];

                let thuePhaiTra = 0;
                let thuNhapConLai = thuNhapChiuThue;

                for (let i = 0; i < bacThue.length; i++) {
                    if (thuNhapConLai > bacThue[i]) {
                        thuePhaiTra += bacThue[i] * thueSuat[i];
                        thuNhapConLai -= bacThue[i];
                    } else {
                        thuePhaiTra += thuNhapConLai * thueSuat[i];
                        thuNhapConLai = 0;
                        break;
                    }
                }

                // X·ª≠ l√Ω tr∆∞·ªùng h·ª£p thu nh·∫≠p v∆∞·ª£t 960 tri·ªáu (thu·∫ø su·∫•t 35%)
                if (thuNhapConLai > 0) {
                    thuePhaiTra += thuNhapConLai * thueSuat[thueSuat.length - 1];
                }

                document.getElementById("result").innerText = `S·ªë ti·ªÅn thu·∫ø ph·∫£i n·ªôp: ${new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(thuePhaiTra)}`;
            }
        </script>
    </div>
</body>
</html>